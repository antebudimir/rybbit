# ============================================================================
# RYBBIT SELF-HOSTED CONFIGURATION
# ============================================================================
# This file contains default values for LOCAL DEVELOPMENT.
# For PRODUCTION deployment:
#   1. Copy this file: cp .env.example .env
#   2. Update DOMAIN_NAME to your actual domain
#   3. Change BASE_URL to https://your-domain.com
#   4. Generate secure secrets (see instructions below)
#   5. Update database passwords
# ============================================================================

# Domain and URL Configuration
# For production: Set to your actual domain (e.g., analytics.yourdomain.com)
# For local development: Use localhost
DOMAIN_NAME=localhost
BASE_URL=http://localhost:3001

# Authentication and Security
# ⚠️ CRITICAL: Generate a secure secret before deploying to production!
# Run: openssl rand -hex 32
# This default value is INSECURE - only for local development
BETTER_AUTH_SECRET=insecure_local_dev_secret_change_in_production
DISABLE_SIGNUP=false

# Webserver Configuration
# Set to false to disable the built-in Caddy webserver (if using your own reverse proxy)
USE_WEBSERVER=false

# Telemetry Config
DISABLE_TELEMETRY=true

# Host Port Mappings
# Controls how Docker containers expose ports to the host
# IMPORTANT: Port binding must match your USE_WEBSERVER setting!
#
# If USE_WEBSERVER=true (using built-in Caddy):
#   Use: HOST_BACKEND_PORT=127.0.0.1:3001:3001 (localhost only)
#        HOST_CLIENT_PORT=127.0.0.1:3002:3002
#
# If USE_WEBSERVER=false (using your own reverse proxy or direct access):
#   Use: HOST_BACKEND_PORT=3001:3001 (all interfaces)
#        HOST_CLIENT_PORT=3002:3002
#
# Default for local development without webserver:
HOST_BACKEND_PORT=3001:3001
HOST_CLIENT_PORT=3002:3002

# ClickHouse Database Configuration
CLICKHOUSE_DB=analytics
CLICKHOUSE_USER=default
# ⚠️ SECURITY WARNING: Change this password before deploying to production!
# Generate strong password with: openssl rand -base64 24
CLICKHOUSE_PASSWORD=frog

# PostgreSQL Database Configuration
POSTGRES_DB=analytics
POSTGRES_USER=frog
# ⚠️ SECURITY WARNING: Change this password before deploying to production!
# Generate strong password with: openssl rand -base64 24
POSTGRES_PASSWORD=frog

# External Service Tokens (optional)
MAPBOX_TOKEN=

# ============================================================================
# FEATURE FLAGS - Self-Hosted Config
# ============================================================================
# Most features are ENABLED by default for self-hosted instances.
# Set to "false" to disable specific features.

# Analytics Features (enabled by default)
# ENABLE_WEB_VITALS=false              # Disable Core Web Vitals tracking
# ENABLE_ERROR_TRACKING=false          # Disable JavaScript error capture

# Client-Side Feature Flags
# Backend URL - should match your BASE_URL or use localhost for development
NEXT_PUBLIC_BACKEND_URL=http://localhost:3001
NEXT_PUBLIC_DISABLE_SIGNUP=false
# Set to false for self-hosted instances (true enables cloud-specific features)
NEXT_PUBLIC_CLOUD=false
NEXT_PUBLIC_MAPBOX_TOKEN=

# Cloudflare Turnstile (optional - for bot protection on signup/login)
# Get keys from: https://dash.cloudflare.com/
# Behavior:
#   - If IS_CLOUD=true: Turnstile is ENABLED by default (set to "false" to disable)
#   - If IS_CLOUD=false: Turnstile is DISABLED by default (set to "true" to enable)
# For self-hosted, keep this commented out or set to false
# NEXT_PUBLIC_ENABLE_TURNSTILE=false
# NEXT_PUBLIC_TURNSTILE_SITE_KEY=
# TURNSTILE_SECRET_KEY=

# Client-side feature flags (sane defaults for self-hosting)
NEXT_PUBLIC_ENABLE_WEB_VITALS=true
NEXT_PUBLIC_ENABLE_ERROR_TRACKING=true
NEXT_PUBLIC_ENABLE_GSC=true
NEXT_PUBLIC_ENABLE_GOOGLE_OAUTH=true
NEXT_PUBLIC_ENABLE_GITHUB_OAUTH=true
# NEXT_PUBLIC_ENABLE_GSC=false                 # Hide Google Search Console
# NEXT_PUBLIC_ENABLE_GOOGLE_OAUTH=false        # Hide Google OAuth button
# NEXT_PUBLIC_ENABLE_GITHUB_OAUTH=false        # Hide GitHub OAuth button
# NEXT_PUBLIC_ENABLE_SESSION_REPLAY=true       # Show Session Replay (opt-in)

# Features requiring API keys (auto-enabled when key is present):
# OAuth Configuration (optional - for Google/Github login)
# GOOGLE_CLIENT_ID=
# GOOGLE_CLIENT_SECRET=
# GITHUB_CLIENT_ID=
# GITHUB_CLIENT_SECRET=

# Email Configuration (optional - for email reports and notifications)
# Get your API key from https://resend.com
# RESEND_API_KEY=

# Enhanced Geolocation (optional - for VPN/Crawler/ASN tracking)
# Get your API key from https://ipapi.is
# IPAPI_KEY=

# Google Search Console Integration (optional)
# Uses the same GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET as OAuth
# GOOGLE_REDIRECT_URI=

# Opt-In Features (disabled by default)
# ENABLE_SESSION_REPLAY=true           # Enable session replay (opt-in)